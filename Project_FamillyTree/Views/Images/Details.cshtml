@model IEnumerable<BusinessObject.DataAccess.Image>

@{
    ViewData["Title"] = "Index";
}

<h1>Index</h1>

<p>
    <a asp-action="Create">Create New</a>
</p>
<div class="image-grid">
    @foreach (var item in Model)
    {
        <div class="image-item">
            <div class="image-wrapper">
                <img class="thumbnail-image" src="@item.UrlImage" alt="Image" onclick="showImageModal(this)">
            </div>
            <div class="image-details">
                <div class="create-date">
                    @Html.DisplayFor(modelItem => item.CreateDate)
                    <form asp-action="Delete" asp-route-id="@item.Id" method="post" onsubmit="return confirm('Are you sure you want to delete this image?');">
                        <input type="submit" value="Delete" class="btn btn-danger" />
                    </form>
                    @*<button class="delete-button" onclick="deleteImage(@item.Id)">Delete</button>*@
                </div>
                <div class="album">
                    @Html.DisplayFor(modelItem => item.Album.UrlAlbum)
                </div>
            </div>
        </div>
    }
</div>

<div id="imageModal" class="modal">
    <span class="modal-content">
        <img id="modalImage" onclick="event.stopPropagation()" alt="Modal Image">
    </span>
</div>

<script>
    function showImageModal(element) {
        var modal = document.getElementById("imageModal");
        var modalImg = document.getElementById("modalImage");

        modal.style.display = "block";
        modalImg.src = element.src;

        // Đóng modal khi nhấp chuột vào nó
        modal.onclick = function() {
            modal.style.display = "none";
        };
    }
</script>

<style>
    .image-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }

    .image-item {
        width: calc(25% - 20px);
        margin-bottom: 20px;
    }

    .image-wrapper {
        position: relative;
        padding-top: 75%;
    }

    .thumbnail-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        cursor: pointer;
    }

    .image-details {
        margin-top: 10px;
        font-size: 14px;
        text-align: center;
    }

    .create-date,
    .album {
        margin-bottom: 5px;
    }

    .modal {
        display: none;
        position: fixed;
        z-index: 9999;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.9);
    }

    .modal-content {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
    }

    .modal-content img {
        max-width: 90%;
        max-height: 90%;
        object-fit: contain;
    }

    .navbar {
        position: relative;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -ms-flex-align: center;
        align-items: center;
        -ms-flex-pack: justify;
        justify-content: space-between;
        padding: 0.5rem 1rem;
        background-image: url(https://www.shutterstock.com/image-vector/vector-horizontal-seamless-tropical-rainforest-260nw-1062464402.jpg);
    }

    body {
        margin: 0;
        padding: 0;
        background-image: url('https://thuthuatnhanh.com/wp-content/uploads/2021/12/background-cay-xanh-ve-don-gian-dep.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        height: 100vh;
        background-color: #b1cfb2;
    }

    .footer {
        position: absolute;
        bottom: 0;
        width: 100%;
        white-space: nowrap;
        line-height: 60px;
        background-image: url('https://www.shutterstock.com/image-vector/vector-horizontal-seamless-tropical-rainforest-260nw-1062464402.jpg');
    }
</style>